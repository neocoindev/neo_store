# Чеклист для деплоя NEO Store

## Перед деплоем

### 1. Настройка переменных окружения
- [ ] Создан файл `.env` на основе `.env_template`
- [ ] Установлен уникальный `SECRET_KEY` (используйте `python generate_secret_key.py`)
- [ ] Установлен `DEBUG=False`
- [ ] Настроен `ALLOWED_HOSTS` с вашим доменом
- [ ] Настроен `CSRF_TRUSTED_ORIGINS` с вашим доменом
- [ ] Установлены сильные пароли для базы данных
- [ ] Настроены учетные данные суперпользователя

### 2. База данных
- [ ] Выбрана стратегия: встроенная БД в контейнере или внешняя БД
- [ ] Если внешняя БД - настроены переменные подключения
- [ ] Настроен план резервного копирования БД

### 3. SSL сертификаты
- [ ] Получены SSL сертификаты (Let's Encrypt или другие)
- [ ] Сертификаты размещены в `nginx/ssl/`
- [ ] Проверены права доступа к сертификатам

### 4. Безопасность
- [ ] Изменены все пароли по умолчанию
- [ ] Настроен файрвол (открыты только порты 22, 80, 443)
- [ ] Отключен доступ к порту БД извне (в продакшене)
- [ ] Настроены регулярные обновления системы

### 5. Медиа файлы
- [ ] Определена стратегия хранения медиа файлов
- [ ] Настроены права доступа к директории media
- [ ] Настроен план резервного копирования медиа файлов

## Процесс деплоя

### 1. Подготовка сервера
- [ ] Установлен Docker и Docker Compose
- [ ] Настроен пользователь с правами docker
- [ ] Склонирован репозиторий проекта

### 2. Настройка проекта
- [ ] Создан и настроен `.env` файл
- [ ] Настроены SSL сертификаты (для продакшена)
- [ ] Проверена конфигурация nginx

### 3. Запуск
- [ ] Выполнена сборка образов: `docker-compose build`
- [ ] Запущены контейнеры: `docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d`
- [ ] Проверены логи: `docker-compose logs -f`
- [ ] Проверен статус контейнеров: `docker-compose ps`

### 4. Проверка работы
- [ ] Приложение доступно по HTTP/HTTPS
- [ ] Статические файлы загружаются корректно
- [ ] Медиа файлы доступны
- [ ] База данных работает
- [ ] Миграции применены
- [ ] Суперпользователь создан
- [ ] Админ-панель доступна

## После деплоя

### 1. Мониторинг
- [ ] Настроен мониторинг логов
- [ ] Настроены алерты на ошибки
- [ ] Проверено использование ресурсов

### 2. Резервное копирование
- [ ] Настроено автоматическое резервное копирование БД
- [ ] Настроено резервное копирование медиа файлов
- [ ] Протестировано восстановление из бэкапа

### 3. Оптимизация
- [ ] Настроен кэш (если необходимо)
- [ ] Оптимизированы настройки Gunicorn
- [ ] Настроен CDN для статических файлов (опционально)

### 4. Документация
- [ ] Задокументированы учетные данные (в безопасном месте)
- [ ] Задокументированы настройки сервера
- [ ] Создана инструкция для команды

## Регулярное обслуживание

### Еженедельно
- [ ] Проверка логов на ошибки
- [ ] Проверка использования дискового пространства
- [ ] Проверка резервных копий

### Ежемесячно
- [ ] Обновление Docker образов
- [ ] Обновление зависимостей проекта
- [ ] Проверка безопасности
- [ ] Тестирование восстановления из бэкапа

### При необходимости
- [ ] Обновление Django и зависимостей
- [ ] Обновление системных пакетов сервера
- [ ] Масштабирование при росте нагрузки

